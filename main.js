/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => animeToObsidian
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// settings.ts
var import_obsidian2 = require("obsidian");

// filefinder.ts
var import_obsidian = require("obsidian");
function ls(asked, folder = app.vault.getRoot()) {
  console.log("listing directory");
  let listOfFiles = [];
  folder.children.forEach((file) => {
    if (file instanceof import_obsidian.TFolder) {
      if (asked == "folder" || asked == "all" || asked == void 0) {
        listOfFiles.push(file.path);
      }
      listOfFiles = listOfFiles.concat(ls(asked, file));
    } else if (file instanceof import_obsidian.TFile) {
      if (asked == "file" || asked == "all" || asked == void 0) {
        listOfFiles.push(file.path);
      }
    }
  });
  return listOfFiles;
}

// settings.ts
var DEFAULT_SETTINGS = {
  basePath: ""
};
var animeToObsidianSettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    const options = ls("folder");
    new import_obsidian2.Setting(containerEl).setName("Base Path").setDesc("The base path for your anime list").addDropdown((dropdown) => {
      dropdown.addOption("", "Select a base path");
      options.forEach((option) => {
        dropdown.addOption(option, option);
      });
      dropdown.setValue(this.plugin.settings.basePath);
      dropdown.onChange(async (value) => {
        this.plugin.settings.basePath = value;
        await this.plugin.saveSettings();
      });
    });
  }
};

// main.ts
var aditionaltags = {
  tags: ["anime", "culture"]
};
var TextPromptModal = class extends import_obsidian3.Modal {
  constructor(app2) {
    super(app2);
    this.text = "";
  }
  onOpen() {
    let { contentEl } = this;
    let title = contentEl.createEl("h2");
    title.textContent = "add a page for an anime";
    let textInput = contentEl.createEl("input", { type: "text" });
    textInput.addEventListener("input", () => {
      this.text = textInput.value;
    });
    let submitButton = contentEl.createEl("button");
    submitButton.textContent = "Submit";
    submitButton.addEventListener("click", () => {
      this.close();
      if (this.resolver) {
        this.resolver(this.text);
      }
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  // Ajouter une mÃ©thode pour obtenir la valeur de la zone de texte
  getValue() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};
var animeText = class {
  constructor() {
  }
  createText(animeData, animeName, aditionaltags2) {
    let text = "";
    text += "---\n" + this.createTags(animeData, animeName, aditionaltags2) + "---\n";
    text += `# description: 
 ${animeData.synopsis}
`;
    return text;
  }
  createTags(data, animeName, aditionaltags2) {
    let tags = "tags:\n";
    tags += `  - ${spaceremover(animeName)}
`;
    aditionaltags2.tags.forEach((element) => {
      element = spaceremover(element);
      console.log(element);
      tags += `  - ${element}
`;
    });
    data.genres.forEach((element) => {
      tags += `  - ${element.name}
`;
    });
    data.themes.forEach((element) => {
      tags += `  - ${element.name}
`;
    });
    data.demographics.forEach((element) => {
      tags += `  - ${element.name}
`;
    });
    return tags;
  }
};
var animeToObsidian = class extends import_obsidian3.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "submit-anime",
      name: "add a page for an anime",
      callback: async () => {
        let modal = new TextPromptModal(this.app);
        modal.open();
        let value = await modal.getValue();
        console.log(value);
        if (value != "") {
          let filePath = this.settings.basePath + "/" + value + ".md";
          let file = await this.app.vault.create(filePath, "");
          let leaf = this.app.workspace.activeLeaf;
          await leaf.openFile(file);
          let editor = leaf.view.sourceMode.cmEditor;
          let text = new animeText();
          console.log(text.createText(await getAnimeData(value), value, aditionaltags));
          editor.setValue(text.createText(await getAnimeData(value), value, aditionaltags));
        } else {
          new import_obsidian3.Notice("did you type nothing ? (error : variable is empty)");
        }
      }
    });
    this.addSettingTab(new animeToObsidianSettingsTab(this.app, this));
  }
  async onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
function spaceremover(text) {
  let newtext = "";
  for (let i = 0; i < text.length; i++) {
    if (text[i] == " ") {
      newtext += "_";
    } else {
      newtext += text[i];
    }
  }
  return newtext;
}
async function getAnimeData(animeName) {
  const request = {
    url: `https://api.jikan.moe/v4/anime?q=${animeName}&limit=1`,
    method: "GET"
  };
  try {
    const response = await (0, import_obsidian3.requestUrl)(request);
    if (response.status !== 200) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    console.log(response.json.data);
    return response.json.data[0];
  } catch (error) {
    console.error(`Failed to fetch anime data: ${error.message}`);
  }
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJmaWxlZmluZGVyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvKlxuYW5pbWUgdG8gb2JzaWRpYW4gcGx1Z2luIGJ5IHhtb25jb2NveFxuaXMgYSBwbHVnaW4gd2hvIHRha2UgZGF0YSBmcm9tIGppaWthbiBhcGkgYW5kIGNyZWF0ZSBhIHBhZ2Ugd2l0aCB0aGUgZGF0YVxuYydlc3QgdW4gcGx1Z2luIHF1aSBwcmVuZCBsZXMgZG9ublx1MDBFOWVzIGRlIGwnYXBpIGppa2FuIGV0IGNyXHUwMEU5ZSB1bmUgcGFnZSBhdmVjIGxlcyBkb25uXHUwMEU5ZXNcblxuaGVsbG8gbm90ZSBmcm9tIHhtb25jb2NveCBJJ20gYSBmcmVuY2ggc3R1ZGVudCBhbmQgaXMgd2h5IG15IGVuZ2xpc2ggaXMgYmFkIGFuZCBhbGwgdGhlIGNvbW1lbnQgYXJlIGluIGZyZW5jaC4gYnV0IHlvdSBjYW4ndCBwYXNzIHRoZSBjb2RlIHRvIGEgdHJhbnNsYXRvciBpZiB5b3Ugd2FudC5cbmJvbmpvdXIgbm90ZSBkZSB4bW9uY29jb3ggamUgc3VpcyB1biBcdTAwRTl0dWRpYW50IGZyYW5cdTAwRTdhaXMgbWFpcyBqJ2FpIGNvZFx1MDBFOSBhdmVjIGxlcyBcdTAwRTlsXHUwMEU5bWVudCBkZSBsJ3VpIGVuIGFuZ2xhaXMgbWFpcyBsZXMgY29tbWVudGFpcmVzIHNvbnQgZW4gZnJhblx1MDBFN2Fpcy4gdm91cyBwb3V2ZXogcGFzc2VyIGxlIGNvZGUgZGFucyB1biB0cmFkdWN0ZXVyIHNpIHZvdXMgdm91bGV6IChtYWlzIGVuIHZyYWkgc2kgdm91cyBcdTAwRUF0ZXMgbGEgYydlc3QgcXVlIHZvdXMgc2F2ZXogZFx1MDBFOWpcdTAwRTAgcGFybGVyIGFuZ2xhaXMpXG4qL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE1vZGFsLCBURmlsZSwgVEZvbGRlciwgTm90aWNlLCByZXF1ZXN0VXJsLCBSZXF1ZXN0VXJsUGFyYW0gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge015UGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MsIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzVGFifSBmcm9tICcuL3NldHRpbmdzJztcblxuXG4vL3RlbXBvcmFpcmUgcG91ciBhdm9pciB1bmUgY29uZmlndXJhdGlvbiBkZSB0YWcgc3VwbFx1MDBFOW1lbnRhaXJlXG5sZXQgYWRpdGlvbmFsdGFncyA9IHtcblx0dGFncyA6W1wiYW5pbWVcIiwgXCJjdWx0dXJlXCJdLFxufTtcblxuLy8gQ3JcdTAwRTllciB1bmUgY2xhc3NlIHBvdXIgbGEgbW9kYWxcbmNsYXNzIFRleHRQcm9tcHRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICB0ZXh0OiBzdHJpbmcgPSAnJztcbiAgICByZXNvbHZlcjogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0bGV0IHRpdGxlID0gY29udGVudEVsLmNyZWF0ZUVsKCdoMicpO1xuXHRcdHRpdGxlLnRleHRDb250ZW50ID0gXCJhZGQgYSBwYWdlIGZvciBhbiBhbmltZVwiO1xuICAgICAgICBsZXQgdGV4dElucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHt0eXBlOiAndGV4dCd9KTtcbiAgICAgICAgdGV4dElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4geyB0aGlzLnRleHQgPSB0ZXh0SW5wdXQudmFsdWU7IH0pO1xuXG4gICAgICAgIC8vIENyXHUwMEU5ZXIgdW4gYm91dG9uXG4gICAgICAgIGxldCBzdWJtaXRCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicpO1xuICAgICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAnU3VibWl0JztcblxuICAgICAgICAvLyBBam91dGVyIHVuIGdlc3Rpb25uYWlyZSBkJ1x1MDBFOXZcdTAwRTluZW1lbnRzIGNsaWNrIGF1IGJvdXRvblxuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBGZXJtZXIgbGEgbW9kYWwgZXQgclx1MDBFOXNvdWRyZSBsYSBwcm9tZXNzZSBhdmVjIGxhIHZhbGV1ciBkZSBsYSB6b25lIGRlIHRleHRlXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIodGhpcy50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgbGV0IHtjb250ZW50RWx9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgLy8gQWpvdXRlciB1bmUgbVx1MDBFOXRob2RlIHBvdXIgb2J0ZW5pciBsYSB2YWxldXIgZGUgbGEgem9uZSBkZSB0ZXh0ZVxuICAgIGdldFZhbHVlKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jbGFzcyBhbmltZVRleHR7XG5cdGNvbnN0cnVjdG9yKCl7XG5cblx0fVxuXG5cdGNyZWF0ZVRleHQoYW5pbWVEYXRhOiBKU09OLCBhbmltZU5hbWU6IHN0cmluZywgYWRpdGlvbmFsdGFnczogSlNPTil7XG5cdFx0bGV0IHRleHQgPSBcIlwiO1xuXHRcdHRleHQgKz0gXCItLS1cXG5cIiArIHRoaXMuY3JlYXRlVGFncyhhbmltZURhdGEsYW5pbWVOYW1lLCBhZGl0aW9uYWx0YWdzKSsgXCItLS1cXG5cIjtcbiAgICAgICAgdGV4dCArPSBgIyBkZXNjcmlwdGlvbjogXFxuICR7YW5pbWVEYXRhLnN5bm9wc2lzfVxcbmA7XG5cblx0XHRyZXR1cm4gdGV4dDtcblx0fVxuXG5cdGNyZWF0ZVRhZ3MoZGF0YSA6IEpTT04gLGFuaW1lTmFtZTogc3RyaW5nLCBhZGl0aW9uYWx0YWdzOiBKU09OKXtcblx0XHRsZXQgdGFncyA9XCJ0YWdzOlxcblwiO1xuXHRcdHRhZ3MgKz0gYCAgLSAke3NwYWNlcmVtb3ZlcihhbmltZU5hbWUpfVxcbmA7XG5cdFx0YWRpdGlvbmFsdGFncy50YWdzLmZvckVhY2goZWxlbWVudCA9PiB7XG5cdFx0XHQvLyB2b2lyIHNpIGlsIHkgYSB1biBlc3BhY2UgZGFucyBsZSB0YWcgZXQgbGUgcmVtcGxhY2VyIHBhciB1biB1bmRlcnNjb3JlXG5cdFx0XHRlbGVtZW50ID0gc3BhY2VyZW1vdmVyKGVsZW1lbnQpO1xuXHRcdFx0Y29uc29sZS5sb2coZWxlbWVudCk7XG5cdFx0XHR0YWdzICs9IGAgIC0gJHtlbGVtZW50fVxcbmA7XG5cdFx0fSk7XG5cdFx0ZGF0YS5nZW5yZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcblx0XHRcdHRhZ3MgKz0gYCAgLSAke2VsZW1lbnQubmFtZX1cXG5gO1xuXHRcdH0pO1xuXHRcdGRhdGEudGhlbWVzLmZvckVhY2goZWxlbWVudCA9PiB7XG5cdFx0XHR0YWdzICs9IGAgIC0gJHtlbGVtZW50Lm5hbWV9XFxuYDtcblx0XHR9KTtcblx0XHRkYXRhLmRlbW9ncmFwaGljcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuXHRcdFx0dGFncyArPSBgICAtICR7ZWxlbWVudC5uYW1lfVxcbmA7XG5cdFx0fSk7XG5cdFx0XG5cblx0XHQvL3ByZW5kcmUgbGVzIGRvbm5cdTAwRTllcyBkZSBsJ2FwaSBldCBsZXMgbWV0dHJlIGRhbnMgbGVzIHRhZ3MgZHUgZ2VucmUgZGVzIHRoXHUwMEU4bWVzIGV0IGRlIGxhIGRcdTAwRTltb2dyYXBoaWVcblx0XHRyZXR1cm4gdGFncztcblx0fVxuXHRcblxufTtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGFuaW1lVG9PYnNpZGlhbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MgfCB1bmtub3duO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3VibWl0LWFuaW1lJyxcbiAgICAgICAgICAgIG5hbWU6ICdhZGQgYSBwYWdlIGZvciBhbiBhbmltZScsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEFmZmljaGVyIHVuZSBib1x1MDBFRXRlIGRlIGRpYWxvZ3VlIHBvdXIgZW50cmVyIGxlIHRpdHJlXG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IFRleHRQcm9tcHRNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuXG4gICAgICAgICAgICAgICAgLy8gQXR0ZW5kcmUgcXVlIGwndXRpbGlzYXRldXIgZmVybWUgbGEgbW9kYWwgZXQgb2J0ZW5pciBsYSB2YWxldXIgZGUgbGEgem9uZSBkZSB0ZXh0ZVxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGF3YWl0IG1vZGFsLmdldFZhbHVlKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7XG5cdFx0XHRcdGlmKHZhbHVlICE9IFwiXCIpe1xuXHRcdFx0XHRcdC8vIENyXHUwMEU5ZXIgdW4gbm91dmVhdSBmaWNoaWVyIE1hcmtkb3duIGF2ZWMgbGUgdGl0cmUgY29tbWUgbm9tIGRlIGZpY2hpZXJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGVQYXRoID0gKHRoaXMuc2V0dGluZ3MgYXMgTXlQbHVnaW5TZXR0aW5ncykuYmFzZVBhdGggKyBcIi9cIiArIHZhbHVlICsgJy5tZCc7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCAnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JcdTAwRTllciB1biBub3V2ZWwgb25nbGV0IGV0IG91dnJpciBsZSBmaWNoaWVyIGRhbnMgY2V0IG9uZ2xldFxuICAgICAgICAgICAgICAgICAgICBsZXQgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE9idGVuaXIgbCdcdTAwRTlkaXRldXIgZHUgZmljaGllciBhY3R1ZWxsZW1lbnQgb3V2ZXJ0XG4gICAgICAgICAgICAgICAgICAgIGxldCBlZGl0b3IgPSBsZWFmLnZpZXcuc291cmNlTW9kZS5jbUVkaXRvcjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1wbGFjZXIgbGUgdGV4dGUgZGUgbCdcdTAwRTlkaXRldXJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRleHQgPSBuZXcgYW5pbWVUZXh0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRleHQuY3JlYXRlVGV4dChhd2FpdCBnZXRBbmltZURhdGEodmFsdWUpLCB2YWx1ZSwgYWRpdGlvbmFsdGFncykpO1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0VmFsdWUodGV4dC5jcmVhdGVUZXh0KGF3YWl0IGdldEFuaW1lRGF0YSh2YWx1ZSksIHZhbHVlLCBhZGl0aW9uYWx0YWdzKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcImRpZCB5b3UgdHlwZSBub3RoaW5nID8gKGVycm9yIDogdmFyaWFibGUgaXMgZW1wdHkpXCIpO1xuXHRcdFx0XHR9XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IGFuaW1lVG9PYnNpZGlhblNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgICAgIC8vIENvZGUgXHUwMEUwIGV4XHUwMEU5Y3V0ZXIgbG9yc3F1ZSBsJ2V4dGVuc2lvbiBlc3QgZFx1MDBFOWNoYXJnXHUwMEU5ZVxuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG59XG5cblxuXG5cbmZ1bmN0aW9uIHNwYWNlcmVtb3Zlcih0ZXh0OiBzdHJpbmcpe1xuICAgIGxldCBuZXd0ZXh0ID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYodGV4dFtpXSA9PSBcIiBcIil7XG4gICAgICAgICAgICBuZXd0ZXh0ICs9IFwiX1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3dGV4dCArPSB0ZXh0W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXd0ZXh0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRBbmltZURhdGEoYW5pbWVOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCByZXF1ZXN0OiBSZXF1ZXN0VXJsUGFyYW0gPSB7XG4gICAgICAgIHVybDogYGh0dHBzOi8vYXBpLmppa2FuLm1vZS92NC9hbmltZT9xPSR7YW5pbWVOYW1lfSZsaW1pdD0xYCxcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlcXVlc3QpO1xuXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuanNvbi5kYXRhKTtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24uZGF0YVswXTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggYW5pbWUgZGF0YTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICBcbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IGFuaW1lVG9PYnNpZGlhbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHtsc30gZnJvbSAnLi9maWxlZmluZGVyJ1xuXG5leHBvcnQgaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xuICAgIGJhc2VQYXRoOiBzdHJpbmc7XG59XG4gIFxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XG4gICAgYmFzZVBhdGg6ICcnXG59XG5cblxuZXhwb3J0IGNsYXNzIGFuaW1lVG9PYnNpZGlhblNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBhbmltZVRvT2JzaWRpYW47XG4gIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IGFuaW1lVG9PYnNpZGlhbikge1xuICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuICBcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgbGV0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuICBcbiAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gIFxuXG4gICAgICBjb25zdCBvcHRpb25zID0gbHMoXCJmb2xkZXJcIik7XG4gIFxuICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdCYXNlIFBhdGgnKVxuICAgICAgICAuc2V0RGVzYygnVGhlIGJhc2UgcGF0aCBmb3IgeW91ciBhbmltZSBsaXN0JylcbiAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJycsICdTZWxlY3QgYSBiYXNlIHBhdGgnKTtcbiAgICAgICAgICBcbiAgICAgICAgICBvcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihvcHRpb24sIG9wdGlvbik7XG4gICAgICAgICAgfSk7XG4gIFxuICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJhc2VQYXRoKTtcbiAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmJhc2VQYXRoID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9OyIsICJpbXBvcnQgeyBUQWJzdHJhY3RGaWxlLCBURm9sZGVyLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgZnVuY3Rpb24gbHMoYXNrZWQ6IHN0cmluZywgZm9sZGVyOiBURm9sZGVyID0gYXBwLnZhdWx0LmdldFJvb3QoKSk6IHN0cmluZ1tdIHtcbiAgICBjb25zb2xlLmxvZyAoXCJsaXN0aW5nIGRpcmVjdG9yeVwiKVxuICAgIGxldCBsaXN0T2ZGaWxlczogc3RyaW5nW10gPSBbXTtcbiAgXG4gICAgZm9sZGVyLmNoaWxkcmVuLmZvckVhY2goKGZpbGU6IFRBYnN0cmFjdEZpbGUpID0+IHtcbiAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBpZiAoYXNrZWQgPT0gXCJmb2xkZXJcIiB8fCBhc2tlZCA9PSBcImFsbFwiIHx8IGFza2VkID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxpc3RPZkZpbGVzLnB1c2goZmlsZS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWNoZXJjaGUgclx1MDBFOWN1cnNpdmUgZGFucyBsZXMgc291cy1kb3NzaWVyc1xuICAgICAgICBsaXN0T2ZGaWxlcyA9IGxpc3RPZkZpbGVzLmNvbmNhdChscyhhc2tlZCwgZmlsZSkpO1xuICAgICAgfSBlbHNlIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgaWYgKGFza2VkID09IFwiZmlsZVwiIHx8IGFza2VkID09IFwiYWxsXCIgfHwgYXNrZWQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbGlzdE9mRmlsZXMucHVzaChmaWxlLnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIHJldHVybiBsaXN0T2ZGaWxlcztcbiAgfVxuXG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFTQSxJQUFBQSxtQkFBbUY7OztBQ1RuRixJQUFBQyxtQkFBK0M7OztBQ0EvQyxzQkFBOEM7QUFFdkMsU0FBUyxHQUFHLE9BQWUsU0FBa0IsSUFBSSxNQUFNLFFBQVEsR0FBYTtBQUMvRSxVQUFRLElBQUssbUJBQW1CO0FBQ2hDLE1BQUksY0FBd0IsQ0FBQztBQUU3QixTQUFPLFNBQVMsUUFBUSxDQUFDLFNBQXdCO0FBQy9DLFFBQUksZ0JBQWdCLHlCQUFTO0FBQzNCLFVBQUksU0FBUyxZQUFZLFNBQVMsU0FBUyxTQUFTLFFBQVc7QUFDN0Qsb0JBQVksS0FBSyxLQUFLLElBQUk7QUFBQSxN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QUNKLENBQUM7QUFDRCxTQUFLLGNBQWMsSUFBSSwyQkFBMkIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQ3JFO0FBQUEsRUFFQSxNQUFNLFdBQVc7QUFBQSxFQUVqQjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDN0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNyQztBQUNKO0FBS0EsU0FBUyxhQUFhLE1BQWE7QUFDL0IsTUFBSSxVQUFVO0FBQ2QsV0FBUyxJQUFJLEdBQUcsSUFBSSxLQUFLLFFBQVEsS0FBSztBQUNsQyxRQUFHLEtBQUssQ0FBQyxLQUFLLEtBQUk7QUFDZCxpQkFBVztBQUFBLElBQ2YsT0FBTztBQUNILGlCQUFXLEtBQUssQ0FBQztBQUFBLElBQ3JCO0FBQUEsRUFDSjtBQUNBLFNBQU87QUFDWDtBQUVBLGVBQWUsYUFBYSxXQUFtQjtBQUMzQyxRQUFNLFVBQTJCO0FBQUEsSUFDN0IsS0FBSyxvQ0FBb0M7QUFBQSxJQUN6QyxRQUFRO0FBQUEsRUFDWjtBQUVBLE1BQUk7QUFDQSxVQUFNLFdBQVcsVUFBTSw2QkFBVyxPQUFPO0FBRXpDLFFBQUksU0FBUyxXQUFXLEtBQUs7QUFDekIsWUFBTSxJQUFJLE1BQU0sdUJBQXVCLFNBQVMsUUFBUTtBQUFBLElBQzVEO0FBRUEsWUFBUSxJQUFJLFNBQVMsS0FBSyxJQUFJO0FBQzlCLFdBQU8sU0FBUyxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQy9CLFNBQVMsT0FBUDtBQUNFLFlBQVEsTUFBTSwrQkFBK0IsTUFBTSxTQUFTO0FBQUEsRUFDaEU7QUFFSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiYXBwIiwgImFkaXRpb25hbHRhZ3MiXQp9Cg==
